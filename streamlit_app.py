
import streamlit as st

st.set_page_config(page_title="発達段階診断", page_icon="🧠", layout="centered")

st.title("🧠 発達段階セルフチェック（青年期向け）")
st.markdown("あなたの今の状態を確認し、成長のヒントを見つけましょう。")

# 年齢スライダー
age = st.slider("あなたの年齢を教えてください", 10, 80, 20)

# 青年期の範囲のみ表示
if 12 <= age <= 22:
    st.subheader("あなたは今、**青年期（12〜22歳）** の段階にいます。")
    st.markdown("以下の項目に**はい / いいえ**で答えてみてください。")

    questions = {
        "自分は何者なのか、よく考えることがある": None,
        "将来の進路や働き方について悩むことがある": None,
        "人との関係に不安を感じることがある": None,
        "親や教師より、友人との関係を優先することがある": None,
        "自分らしさを大事にしたいと思っている": None
    }

    answers = {}
    for q in questions:
        answers[q] = st.radio(q, ["はい", "いいえ"], key=q)

    if st.button("診断する"):
        yes_count = sum([1 for a in answers.values() if a == "はい"])
        st.subheader("◆ 診断結果")

        if yes_count >= 4:
            st.success("あなたは今、**自己理解と他者との関係の中で深く模索する時期**にいます。\n\nその悩みや違和感は、成長の証です。安心して、今の自分と対話を続けてください。")
        elif 2 <= yes_count < 4:
            st.info("あなたは今、**少しずつ自分らしさを掴み始めている段階**です。\n\nモヤモヤは悪いことではなく、“気づき”のきっかけ。焦らず進んで大丈夫。")
        else:
            st.warning("今はあまり違和感を感じていないかもしれません。\n\nでも、自分に問いかける時間をつくることで、今後の指針がクリアになるかもしれません。")

else:
    st.info("この診断は **青年期（12〜22歳）** に焦点を当てた内容です。対象年齢のときにぜひ試してみてください。")

elif 0 <= age <= 1:
    st.subheader("あなたは今、**乳児期（0〜1歳）** に対応する診断を見ています。")
    st.markdown("記憶や現在の傾向から、安心感や信頼の土台が育っているかをチェックしてみましょう。")

    questions = {
        "幼い頃、身近な人（主に親）に「愛されていた」という感覚がある": None,
        "「泣いたら誰かが助けてくれる」という安心感が育っていたと思う": None,
        "幼少期に、不安を安心に変えてくれた経験（抱きしめてもらった、そばにいてもらった）がある": None,
        "幼い頃、放置されたり、感情に寄り添ってもらえなかった記憶は少ない": None,
        "自分は「存在していい」と思える感覚が、幼い頃からあった（なんとなくでも）": None,
        "人と距離を縮めるとき、無条件の信頼感を感じることがある": None,
        "不安なとき、誰かに助けを求めるのにあまり抵抗がない": None,
        "自分は「守られる価値のある存在」だとどこかで信じている": None,
        "「他者は基本的に信頼できる存在」と感じられることが多い": None,
        "ひとりの時間も、人といる時間も、安心して過ごせる": None
    }

    answers = {}
    for q in questions:
        answers[q] = st.radio(q, ["はい", "いいえ"], key=q)

    if st.button("診断する"):
        yes_count = sum([1 for a in answers.values() if a == "はい"])
        st.subheader("◆ 診断結果")

        if yes_count >= 7:
            st.success("あなたは「世界は信頼できる場所だ」という感覚がしっかり根づいているようです。\\n\\n対人関係でも自分を守る安心感が土台にあり、感情やニーズを素直に出すことができているかもしれません。")
        elif 4 <= yes_count <= 6:
            st.info("幼少期に安心感を得られた場面と、そうでない場面が混在していたかもしれません。\\n\\n人を信じたいけれど怖さが勝つ時がある、そんな感覚も自然なことです。少しずつ「信頼しても大丈夫だった」経験を増やしていきましょう。")
        else:
            st.warning("安心して誰かに頼ることが難しかった経験や、見捨てられる不安を抱えやすい傾向があるかもしれません。\\n\\nでもそれはあなたのせいではなく、育った環境の中で守られきれなかっただけ。いまから「安心を知る経験」を積むことは、いつからでも始められます。")
